/*! For license information please see proofnetwork-client.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ProofNetworkClient=e():t.ProofNetworkClient=e()}(this,()=>(()=>{var t={"./node_modules/base64-js/index.js":(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,o=a(t),s=o[0],c=o[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,c)),h=0,f=c>0?s-4:s;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;return 2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[h++]=255&e),1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(u(t,a,a+s>c?c:a+s));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function u(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(c(n));return i.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":(t,e,r)=>{"use strict";const n=r("./node_modules/base64-js/index.js"),i=r("./node_modules/ieee754/index.js"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|y(t,e);let n=a(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(J(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(J(t,ArrayBuffer)||t&&J(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(J(t,SharedArrayBuffer)||t&&J(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);const i=function(t){if(c.isBuffer(t)){const e=0|d(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||K(t.length)?a(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return h(t),a(t<0?0:0|d(t))}function l(t){const e=t.length<0?0:0|d(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||J(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(i)return n?-1:V(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return x(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return B(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){let o,s=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(u(t,o)===u(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(u(t,o+n)!==u(e,n)){r=!1;break}if(r)return o}return-1}function E(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(K(n))return s;t[r+s]=n}return s}function C(t,e,r,n){return G(V(e,t.length-r),t,r,n)}function A(t,e,r,n){return G(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function R(t,e,r,n){return G(W(e),t,r,n)}function I(t,e,r,n){return G(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function B(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,c;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(o=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=v)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=v));return r}(n)}e.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return h(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},c.allocUnsafe=function(t){return f(t)},c.allocUnsafeSlow=function(t){return f(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=c.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(J(e,Uint8Array))i+e.length>n.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)w(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,i){if(J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const a=Math.min(o,s),u=this.slice(n,i),h=t.slice(e,r);for(let t=0;t<a;++t)if(u[t]!==h[t]){o=u[t],s=h[t];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return E(this,t,e,r);case"utf8":case"utf-8":return C(this,t,e,r);case"ascii":case"latin1":case"binary":return A(this,t,e,r);case"base64":return R(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const v=4096;function x(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function S(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=Y[t[n]];return i}function k(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function O(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n,i){F(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function M(t,e,r,n,i){F(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _(t,e,r,n,o){return e=+e,r>>>=0,o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function j(t,e,r,n,o){return e=+e,r>>>=0,o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=X(function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=X(function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=X(function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),c.prototype.readBigInt64BE=X(function(t){z(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)}),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=X(function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=X(function(t,e=0){return M(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=X(function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=X(function(t,e=0){return M(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(t,e,r){return _(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return _(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=c.isBuffer(t)?t:c.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const D={};function $(t,e,r){D[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function q(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function F(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new D.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}(n,i,o)}function z(t,e){if("number"!=typeof t)throw new D.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw z(t,r),new D.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}$("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),$("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function J(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const Y=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function X(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},"./node_modules/cross-fetch/dist/browser-polyfill.js":function(t,e,r){!function(t){!function(e){var n="undefined"!=typeof globalThis&&globalThis||void 0!==t&&t||void 0!==r.g&&r.g||{},i="URLSearchParams"in n,o="Symbol"in n&&"iterator"in Symbol,s="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(t){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function f(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function g(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function w(t){var e=new FileReader,r=g(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:a&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():c&&s&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(t)||h(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return y(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(s)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,r,n,i,o=y(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,r=g(e=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(t.type))?n[1]:"utf-8",e.readAsText(t,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=f(t),e=l(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[f(t)]},d.prototype.get=function(t){return t=f(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(f(t))},d.prototype.set=function(t,e){this.map[f(t)]=l(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),p(t)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),p(t)},d.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),p(t)},o&&(d.prototype[Symbol.iterator]=d.prototype.entries);var E=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C(t,e){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,o=(e=e||{}).body;if(t instanceof C){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(i=(r=e.method||this.method||"GET").toUpperCase(),E.indexOf(i)>-1?i:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function A(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function R(t,e){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})},b.call(C.prototype),b.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},R.error=function(){var t=new R(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var I=[301,302,303,307,308];R.redirect=function(t,e){if(-1===I.indexOf(e))throw new RangeError("Invalid status code");return new R(null,{status:e,headers:{location:t}})},e.DOMException=n.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function B(t,r){return new Promise(function(i,o){var a=new C(t,r);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function h(){u.abort()}if(u.onload=function(){var t,e,r={statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{e.append(n,i)}catch(t){console.warn("Response "+t.message)}}}),e)};0===a.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout(function(){i(new R(n,r))},0)},u.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},u.open(a.method,function(t){try{return""===t&&n.location.href?n.location.href:t}catch(e){return t}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(s?u.responseType="blob":c&&(u.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof d||n.Headers&&r.headers instanceof n.Headers)){var p=[];Object.getOwnPropertyNames(r.headers).forEach(function(t){p.push(f(t)),u.setRequestHeader(t,l(r.headers[t]))}),a.headers.forEach(function(t,e){-1===p.indexOf(e)&&u.setRequestHeader(e,t)})}else a.headers.forEach(function(t,e){u.setRequestHeader(e,t)});a.signal&&(a.signal.addEventListener("abort",h),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",h)}),u.send(void 0===a._bodyInit?null:a._bodyInit)})}B.polyfill=!0,n.fetch||(n.fetch=B,n.Headers=d,n.Request=C,n.Response=R),e.Headers=d,e.Request=C,e.Response=R,e.fetch=B}({})}("undefined"!=typeof self?self:this)},"./node_modules/ieee754/index.js":(t,e)=>{e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+f>=1?l/c:l*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+p]=255&s,p+=d,s/=256,u-=8);t[r+p-d]|=128*y}},"./src/auth/authentication-manager.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{AuthenticationManager:()=>o});var n=r("./src/utils/errors.ts"),i=r("./src/auth/wallet-utils.ts");class o{constructor(t,e){this.httpClient=t,this.walletAdapter=e,this.state={isAuthenticated:!1},this.callbacks=[],this.setupRequestInterceptor()}async authenticate(){try{const t=await this.walletAdapter.connect(),e=await this.getAuthenticationChallenge(t),r=(0,i.formatAuthenticationMessage)(e.challenge,Date.now()),n=await this.walletAdapter.signMessage(r),o=await this.submitSignedChallenge(t,e.challenge,n);return this.updateAuthenticationState({isAuthenticated:!0,sessionToken:o.sessionToken,expiresAt:o.expiresAt,publicKey:t}),this.scheduleTokenRefresh(),this.state}catch(t){throw this.updateAuthenticationState({isAuthenticated:!1}),new n.AuthenticationError(`Authentication failed: ${t instanceof Error?t.message:"Unknown error"}`)}}async logout(){try{this.state.sessionToken&&await this.httpClient.post("/auth/logout",{headers:{Authorization:`Bearer ${this.state.sessionToken}`}})}catch(t){}finally{await this.walletAdapter.disconnect(),this.clearRefreshTimeout(),this.updateAuthenticationState({isAuthenticated:!1})}}getAuthenticationState(){return{...this.state}}isAuthenticated(){return this.state.isAuthenticated&&this.isTokenValid()}onAuthenticationStateChange(t){return this.callbacks.push(t),()=>{const e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}}async getAuthenticationChallenge(t){return(await this.httpClient.post("/auth/challenge",{body:{publicKey:t}})).data}async submitSignedChallenge(t,e,r){return(await this.httpClient.post("/auth/verify",{body:{publicKey:t,challenge:e,signature:r}})).data}async refreshToken(){if(this.state.sessionToken)try{const t=await this.httpClient.post("/auth/refresh",{headers:{Authorization:`Bearer ${this.state.sessionToken}`}});this.updateAuthenticationState({...this.state,sessionToken:t.data.sessionToken,expiresAt:t.data.expiresAt}),this.scheduleTokenRefresh()}catch(t){this.updateAuthenticationState({isAuthenticated:!1})}}scheduleTokenRefresh(){if(this.clearRefreshTimeout(),!this.state.expiresAt)return;const t=this.state.expiresAt-Date.now()-3e5;t>0&&(this.refreshTimeout=setTimeout(()=>{this.refreshToken()},t))}clearRefreshTimeout(){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=void 0)}isTokenValid(){return!!this.state.expiresAt&&Date.now()<this.state.expiresAt}updateAuthenticationState(t){this.state={...this.state,...t},this.callbacks.forEach(t=>t(this.state))}setupRequestInterceptor(){this.httpClient.addRequestInterceptor(t=>this.state.sessionToken&&this.isTokenValid()?{...t,headers:{...t.headers,Authorization:`Bearer ${this.state.sessionToken}`}}:t)}}},"./src/auth/wallet-utils.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{PhantomWalletAdapter:()=>i,formatAuthenticationMessage:()=>o,validateSignature:()=>s});var n=r("./node_modules/buffer/index.js").Buffer;class i{constructor(){this.wallet=window?.solana?.isPhantom?window.solana:null}async connect(){if(!this.wallet)throw new Error("Phantom wallet not found. Please install Phantom wallet.");try{return(await this.wallet.connect()).publicKey.toString()}catch(t){throw new Error(`Failed to connect to Phantom wallet: ${t}`)}}async disconnect(){this.wallet&&this.wallet.isConnected&&await this.wallet.disconnect()}async signMessage(t){if(!this.wallet||!this.wallet.isConnected)throw new Error("Wallet not connected");try{const e=(new TextEncoder).encode(t),r=await this.wallet.signMessage(e,"utf8");return n.from(r.signature).toString("base64")}catch(t){throw new Error(`Failed to sign message: ${t}`)}}isConnected(){return this.wallet?.isConnected||!1}getPublicKey(){return this.wallet?.publicKey?.toString()||null}}function o(t,e){return`ProofNetwork Authentication Challenge\n\nChallenge: ${t}\nTimestamp: ${e}\n\nSign this message to authenticate with ProofNetwork.`}function s(t,e,r){try{return e.length>0&&r.length>0}catch{return!1}}},"./src/client/proof-network-client.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{ProofNetworkClient:()=>l});var n=r("./src/http/http-client.ts"),i=r("./src/auth/authentication-manager.ts"),o=r("./src/contracts/contract-call-manager.ts"),s=r("./src/contracts/response-parser.ts"),a=r("./src/http/rate-limiter.ts"),c=r("./src/utils/retry.ts"),u=r("./src/utils/circuit-breaker.ts"),h=r("./src/auth/wallet-utils.ts"),f=r("./src/utils/errors.ts");class l{constructor(t){this.isInitialized=!1,this.validateConfig(t),this.retryManager=new c.RetryManager({strategy:"exponential",maxRetries:3,baseDelay:1e3,maxDelay:1e4,jitter:!0,...t.retryConfig}),this.circuitBreaker=new u.CircuitBreaker({failureThreshold:5,recoveryTimeout:3e4,monitoringPeriod:6e4,...t.circuitBreakerConfig}),this.rateLimitManager=new a.RateLimitManager({queueProcessingInterval:1e3,maxQueueSize:1e3,defaultBackoffMs:1e3,...t.rateLimitConfig}),this.httpClient=new n.HttpClient(t.apiUrl,t.timeout,this.retryManager,this.circuitBreaker),this.setupRateLimitingInterceptor(),this.walletAdapter=t.walletAdapter||new h.PhantomWalletAdapter,this.authManager=new i.AuthenticationManager(this.httpClient,this.walletAdapter),this.contractManager=new o.ContractCallManager(this.httpClient),this.responseParser=new s.ResponseParser}async initialize(){if(!this.isInitialized)try{await this.httpClient.get("/health"),this.isInitialized=!0}catch(t){throw new f.ProofNetworkClientError(`Failed to initialize ProofNetwork client: ${t instanceof Error?t.message:"Unknown error"}`,"INITIALIZATION_ERROR")}}async authenticate(){return await this.ensureInitialized(),this.authManager.authenticate()}async logout(){return this.authManager.logout()}getAuthenticationState(){return this.authManager.getAuthenticationState()}onAuthenticationStateChange(t){return this.authManager.onAuthenticationStateChange(t)}async callContract(t){await this.ensureInitialized(),await this.ensureAuthenticated();const e=await this.rateLimitManager.executeWithRateLimit(()=>this.contractManager.callContract(t),t.contractId);return this.responseParser.parseContractResponse(e)}async batchCallContracts(t){await this.ensureInitialized(),await this.ensureAuthenticated();const e=await this.rateLimitManager.executeWithRateLimit(()=>this.contractManager.batchCallContracts(t));return this.responseParser.parseBatchResponse(e)}async getContractInfo(t,e=!1){return await this.ensureInitialized(),this.contractManager.getContractInfo(t,e)}async listContracts(t){return await this.ensureInitialized(),this.contractManager.listContracts(t)}async validateContractCall(t){return await this.ensureInitialized(),this.contractManager.validateContractCall(t)}async getContent(t){return await this.ensureInitialized(),(await this.httpClient.get(`/content${t}`)).data}async updateContent(t,e){return await this.ensureInitialized(),await this.ensureAuthenticated(),(await this.httpClient.post(`/content${t}`,{body:e})).data}registerResponseSchema(t,e){this.responseParser.registerSchema(t,e)}getClientStatus(){return{isInitialized:this.isInitialized,isAuthenticated:this.authManager.isAuthenticated(),rateLimit:this.rateLimitManager.getQueueStatus(),circuitBreaker:this.circuitBreaker.getState()}}async quickCall(t,e,r={},n){const i={contractId:t,functionName:e,parameters:r,gasLimit:n},o=await this.callContract(i);return o.success?o.data:void 0}async safeCall(t,e,r={},n){try{const i={contractId:t,functionName:e,parameters:r,gasLimit:n},o=await this.callContract(i);return{success:o.success,data:o.data,error:o.error}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}destroy(){this.rateLimitManager.destroy(),this.contractManager.clearContractCache(),this.circuitBreaker.reset()}validateConfig(t){if(!t.apiUrl)throw new f.ProofNetworkClientError("API URL is required","INVALID_CONFIG");try{new URL(t.apiUrl)}catch{throw new f.ProofNetworkClientError("Invalid API URL format","INVALID_CONFIG")}}async ensureInitialized(){this.isInitialized||await this.initialize()}async ensureAuthenticated(){if(!this.authManager.isAuthenticated())throw new f.ProofNetworkClientError("Authentication required. Call authenticate() first.","AUTHENTICATION_REQUIRED",401)}setupRateLimitingInterceptor(){this.httpClient.addResponseInterceptor(t=>(t.rateLimit&&this.rateLimitManager.updateRateLimitInfo(t.rateLimit),t))}}},"./src/content/content-manager.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{ContentManager:()=>i});var n=r("./src/utils/errors.ts");class i{constructor(t,e={}){this.httpClient=t,this.cache=new Map,this.config={defaultTtl:3e5,maxCacheSize:1e3,enableETagValidation:!0,...e}}async getContent(t,e={}){const r=this.normalizePath(t),n=!1!==e.useCache,i=e.ttl||this.config.defaultTtl;if(n&&!e.forceRefresh){const t=this.getCachedContent(r);if(t)return this.config.enableETagValidation&&t.etag?this.validateAndRefreshContent(r,t,i):this.createContentResponse(t)}return this.fetchAndCacheContent(r,i)}async updateContent(t,e,r={}){const i=this.normalizePath(t);try{const t=await this.httpClient.post(`/content${i}`,{body:e,headers:{"Content-Type":"application/json"}});return this.setCachedContent(i,{data:t.data.data,path:i,lastModified:t.data.lastModified,etag:t.data.etag,cachedAt:Date.now(),ttl:this.config.defaultTtl}),t.data}catch(e){throw new n.ProofNetworkClientError(`Failed to update content at ${t}: ${e instanceof Error?e.message:"Unknown error"}`,"CONTENT_UPDATE_ERROR")}}async deleteContent(t){const e=this.normalizePath(t);try{await this.httpClient.delete(`/content${e}`),this.cache.delete(e)}catch(e){throw new n.ProofNetworkClientError(`Failed to delete content at ${t}: ${e instanceof Error?e.message:"Unknown error"}`,"CONTENT_DELETE_ERROR")}}async listContent(t,e={}){const r=this.normalizePath(t),i=new URLSearchParams;e.recursive&&i.append("recursive","true"),e.includeMetadata&&i.append("metadata","true");const o=i.toString(),s=o?`/content${r}?${o}`:`/content${r}`;try{return(await this.httpClient.get(s)).data}catch(e){throw new n.ProofNetworkClientError(`Failed to list content at ${t}: ${e instanceof Error?e.message:"Unknown error"}`,"CONTENT_LIST_ERROR")}}clearCache(){this.cache.clear()}invalidateCache(t){if(t){const e=this.normalizePath(t);this.cache.delete(e)}else this.cache.clear()}getCacheStats(){return{size:this.cache.size,maxSize:this.config.maxCacheSize,hitRate:0,entries:Array.from(this.cache.entries()).map(([t,e])=>({path:t,cachedAt:e.cachedAt,lastAccessed:e.cachedAt,size:JSON.stringify(e.data).length}))}}parseAsText(t){return"string"==typeof t?t:JSON.stringify(t)}parseAsJson(t){if("string"==typeof t)try{return JSON.parse(t)}catch{throw new n.ProofNetworkClientError("Content is not valid JSON","PARSE_ERROR")}return t}parseAsAsset(t){if("object"==typeof t&&null!==t)return t;if("string"==typeof t)return t.startsWith("data:")?{base64:t}:{url:t};throw new n.ProofNetworkClientError("Invalid asset content format","PARSE_ERROR")}normalizePath(t){return(t.startsWith("/")?t:`/${t}`).replace(/\/+/g,"/")}getCachedContent(t){const e=this.cache.get(t);return e?Date.now()-e.cachedAt>e.ttl?(this.cache.delete(t),null):e:null}setCachedContent(t,e){if(this.cache.size>=this.config.maxCacheSize){const t=Array.from(this.cache.keys())[0];void 0!==t&&this.cache.delete(t)}this.cache.set(t,e)}async fetchAndCacheContent(t,e){try{const r=await this.httpClient.get(`/content${t}`);return this.setCachedContent(t,{data:r.data.data,path:t,lastModified:r.data.lastModified,etag:r.data.etag,cachedAt:Date.now(),ttl:e}),r.data}catch(e){throw new n.ProofNetworkClientError(`Failed to fetch content at ${t}: ${e instanceof Error?e.message:"Unknown error"}`,"CONTENT_FETCH_ERROR")}}async validateAndRefreshContent(t,e,r){try{const n=await this.httpClient.get(`/content${t}`,{headers:e.etag?{"If-None-Match":e.etag}:{}});return this.setCachedContent(t,{data:n.data.data,path:t,lastModified:n.data.lastModified,etag:n.data.etag,cachedAt:Date.now(),ttl:r}),n.data}catch(t){if(t instanceof Error&&"statusCode"in t&&304===t.statusCode)return this.createContentResponse(e);throw t}}createContentResponse(t){return{data:t.data,path:t.path,lastModified:t.lastModified,etag:t.etag}}}},"./src/contracts/contract-call-manager.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{ContractCallManager:()=>i});var n=r("./src/utils/errors.ts");class i{constructor(t){this.httpClient=t,this.contractCache=new Map,this.cacheExpiry=new Map,this.CACHE_TTL=3e5}async callContract(t){this.validateContractCallRequest(t);try{const e=await this.httpClient.post("/contracts/call",{body:t});if(!e.data.success)throw new n.ContractCallError(e.data.error||"Contract call failed",t.contractId,t.functionName);return e.data}catch(e){if(e instanceof n.ContractCallError)throw e;throw new n.ContractCallError(`Failed to call contract function: ${e instanceof Error?e.message:"Unknown error"}`,t.contractId,t.functionName)}}async batchCallContracts(t){if(0===t.length)return[];t.forEach(t=>this.validateContractCallRequest(t));try{return(await this.httpClient.post("/contracts/batch-call",{body:{requests:t}})).data}catch(t){throw new n.ContractCallError(`Batch contract call failed: ${t instanceof Error?t.message:"Unknown error"}`)}}async getContractInfo(t,e=!1){if(!e&&this.isContractCached(t))return this.contractCache.get(t);try{const e=await this.httpClient.get(`/contracts/${t}/info`);return this.contractCache.set(t,e.data),this.cacheExpiry.set(t,Date.now()+this.CACHE_TTL),e.data}catch(e){throw new n.ContractCallError(`Failed to get contract info: ${e instanceof Error?e.message:"Unknown error"}`,t)}}async listContracts(t={}){const e=new URLSearchParams;t.page&&e.append("page",t.page.toString()),t.limit&&e.append("limit",t.limit.toString());const r=e.toString(),i=r?`/contracts?${r}`:"/contracts";try{return(await this.httpClient.get(i)).data}catch(t){throw new n.ContractCallError(`Failed to list contracts: ${t instanceof Error?t.message:"Unknown error"}`)}}async validateContractCall(t){try{const e=(await this.getContractInfo(t.contractId)).functions.find(e=>e.name===t.functionName);if(!e)throw new n.ContractCallError(`Function '${t.functionName}' not found in contract '${t.contractId}'`,t.contractId,t.functionName);const r=e.parameters.filter(t=>t.required);for(const e of r)if(!(e.name in t.parameters))throw new n.ContractCallError(`Required parameter '${e.name}' missing for function '${t.functionName}'`,t.contractId,t.functionName);for(const[r,i]of Object.entries(t.parameters)){const o=e.parameters.find(t=>t.name===r);if(o&&!this.isValidParameterType(i,o.type))throw new n.ContractCallError(`Parameter '${r}' has invalid type. Expected '${o.type}'`,t.contractId,t.functionName)}return!0}catch(t){if(t instanceof n.ContractCallError)throw t;return!1}}clearContractCache(t){t?(this.contractCache.delete(t),this.cacheExpiry.delete(t)):(this.contractCache.clear(),this.cacheExpiry.clear())}validateContractCallRequest(t){if(!t.contractId)throw new n.ContractCallError("Contract ID is required");if(!t.functionName)throw new n.ContractCallError("Function name is required",t.contractId);if(t.gasLimit&&t.gasLimit<0)throw new n.ContractCallError("Gas limit must be positive",t.contractId,t.functionName)}isContractCached(t){const e=this.cacheExpiry.get(t);return!!e&&Date.now()<e}isValidParameterType(t,e){switch(e.toLowerCase()){case"string":return"string"==typeof t;case"number":case"int":case"integer":return"number"==typeof t&&Number.isInteger(t);case"float":case"double":return"number"==typeof t;case"boolean":case"bool":return"boolean"==typeof t;case"array":return Array.isArray(t);case"object":return"object"==typeof t&&null!==t&&!Array.isArray(t);default:return!0}}}},"./src/contracts/response-parser.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{ResponseParser:()=>i});var n=r("./src/utils/errors.ts");class i{constructor(){this.schemas=new Map}registerSchema(t,e){this.schemas.set(t,e)}parseContractResponse(t,e){const r={success:t.success,metadata:{transactionId:t.transactionId,gasUsed:t.gasUsed}};if(!t.success)return r.error=t.error||"Contract call failed",r;try{let n=this.parseResponseData(t.result);if(e&&this.schemas.has(e)){const t=this.schemas.get(e);if(!this.validateData(n,t))throw new Error(`Response data does not match schema: ${e}`)}return r.data=n,r}catch(t){throw new n.ContractCallError(`Failed to parse contract response: ${t instanceof Error?t.message:"Unknown error"}`)}}parseBatchResponse(t,e){return t.map(t=>this.parseContractResponse(t,e))}parseResponseData(t){if(null==t)return t;if("object"==typeof t)return this.deepParseObject(t);if("string"==typeof t)try{const e=JSON.parse(t);return this.deepParseObject(e)}catch{return t}return t}deepParseObject(t){if(Array.isArray(t))return t.map(t=>this.deepParseObject(t));if("object"==typeof t&&null!==t){const e={};for(const[r,n]of Object.entries(t))"string"==typeof n&&this.isNumericString(n)?e[r]=this.parseNumericString(n):"string"==typeof n&&this.isBooleanString(n)?e[r]="true"===n.toLowerCase():e[r]=this.deepParseObject(n);return e}return t}isNumericString(t){return/^-?\d*\.?\d+$/.test(t.trim())}parseNumericString(t){const e=Number(t);return Number.isInteger(e)?parseInt(t,10):parseFloat(t)}isBooleanString(t){const e=t.toLowerCase().trim();return"true"===e||"false"===e}validateData(t,e){try{return this.validateValue(t,e)}catch{return!1}}validateValue(t,e){switch(e.type){case"string":return"string"==typeof t&&!(e.pattern&&!new RegExp(e.pattern).test(t));case"number":return!("number"!=typeof t||void 0!==e.minimum&&t<e.minimum||void 0!==e.maximum&&t>e.maximum);case"boolean":return"boolean"==typeof t;case"array":return!!Array.isArray(t)&&(!e.items||t.every(t=>this.validateValue(t,e.items)));case"object":if("object"!=typeof t||null===t||Array.isArray(t))return!1;if(e.required)for(const r of e.required)if(!(r in t))return!1;if(e.properties)for(const[r,n]of Object.entries(e.properties))if(r in t&&!this.validateValue(t[r],n))return!1;return!0;default:return!0}}createErrorRecoveryStrategy(t){const e=t.message.toLowerCase();return e.includes("timeout")||e.includes("network")?"retry":e.includes("parse")||e.includes("invalid json")?"fallback":"fail"}tryFallbackParsing(t){const e=[()=>t,()=>String(t),()=>t?.toString?.()||String(t),()=>({raw:t})];for(const t of e)try{return t()}catch{continue}return null}}},"./src/http/http-client.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{HttpClient:()=>i});var n=r("./src/utils/errors.ts");class i{constructor(t,e=3e4,r,n){this.requestInterceptors=[],this.responseInterceptors=[],this.baseUrl=t.replace(/\/$/,""),this.defaultTimeout=e,this.retryManager=r,this.circuitBreaker=n}addRequestInterceptor(t){this.requestInterceptors.push(t)}addResponseInterceptor(t){this.responseInterceptors.push(t)}async get(t,e={}){return this.request(t,{...e,method:"GET"})}async post(t,e={}){return this.request(t,{...e,method:"POST"})}async put(t,e={}){return this.request(t,{...e,method:"PUT"})}async delete(t,e={}){return this.request(t,{...e,method:"DELETE"})}async request(t,e){const r=`${this.baseUrl}${t}`;let n=e;for(const t of this.requestInterceptors)n=await t(n);const i=()=>this.executeRequest(r,n);return this.circuitBreaker.execute(()=>this.retryManager.executeWithRetry(i,t=>this.shouldRetry(t)))}async executeRequest(t,e){const r=new AbortController,i=e.timeout||this.defaultTimeout,o=setTimeout(()=>r.abort(),i);try{const i={method:e.method||"GET",headers:{"Content-Type":"application/json",...e.headers},signal:r.signal};e.body&&(i.body="string"==typeof e.body?e.body:JSON.stringify(e.body));const s=await fetch(t,i);clearTimeout(o);const a=this.extractRateLimitInfo(s.headers);if(429===s.status)throw new n.RateLimitError("Rate limit exceeded",a?.retryAfter);if(!s.ok){const t=await this.parseResponseBody(s);throw(0,n.createErrorFromResponse)(s,t)}let c={data:await this.parseResponseBody(s),status:s.status,statusText:s.statusText,headers:s.headers,rateLimit:a};for(const t of this.responseInterceptors)c=await t(c);return c}catch(t){if(clearTimeout(o),t instanceof DOMException&&"AbortError"===t.name)throw new n.NetworkError(`Request timeout after ${i}ms`);throw t}}async parseResponseBody(t){const e=t.headers.get("content-type");if(e?.includes("application/json"))return t.json();const r=await t.text();try{return JSON.parse(r)}catch{return r}}extractRateLimitInfo(t){const e=t.get("X-RateLimit-Limit"),r=t.get("X-RateLimit-Remaining"),n=t.get("X-RateLimit-Reset"),i=t.get("Retry-After");if(e&&r&&n)return{limit:parseInt(e,10),remaining:parseInt(r,10),resetTime:1e3*parseInt(n,10),retryAfter:i?1e3*parseInt(i,10):void 0}}shouldRetry(t){if(t instanceof n.RateLimitError)return!0;if(t instanceof n.NetworkError){const e=t.statusCode;return!e||e>=500||408===e||429===e}return!1}}},"./src/http/rate-limiter.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{RateLimitManager:()=>i});var n=r("./src/utils/errors.ts");class i{constructor(t={queueProcessingInterval:1e3,maxQueueSize:1e3,defaultBackoffMs:1e3}){this.config=t,this.globalState=null,this.contractStates=new Map,this.requestQueue=[],this.isProcessingQueue=!1,this.startQueueProcessing()}updateRateLimitInfo(t,e){const r={limit:t.limit,remaining:t.remaining,resetTime:t.resetTime,lastUpdated:Date.now()};e?this.contractStates.set(e,r):this.globalState=r}async executeWithRateLimit(t,e,r=0){if(this.canExecuteImmediately(e))try{return await t()}catch(i){if(i instanceof n.RateLimitError)return this.queueRequest(t,e,r);throw i}return this.queueRequest(t,e,r)}canExecuteImmediately(t){const e=this.checkRateLimit(this.globalState),r=!t||this.checkRateLimit(this.contractStates.get(t));return e&&r}checkRateLimit(t){return!t||(Date.now()>=t.resetTime||t.remaining>0)}async queueRequest(t,e,r=0){if(this.requestQueue.length>=this.config.maxQueueSize)throw new n.RateLimitError("Request queue is full. Too many requests queued.");return new Promise((e,n)=>{const i={execute:t,resolve:e,reject:n,priority:r,timestamp:Date.now()},o=this.requestQueue.findIndex(t=>t.priority<r);-1===o?this.requestQueue.push(i):this.requestQueue.splice(o,0,i)})}startQueueProcessing(){this.queueProcessingInterval=setInterval(()=>{this.processQueue()},this.config.queueProcessingInterval)}async processQueue(){if(!this.isProcessingQueue&&0!==this.requestQueue.length){this.isProcessingQueue=!0;try{const t=this.requestQueue.filter((t,e)=>e<3&&this.canExecuteImmediately());for(const e of t){const t=this.requestQueue.indexOf(e);if(t>-1){this.requestQueue.splice(t,1);try{const t=await e.execute();e.resolve(t)}catch(t){t instanceof n.RateLimitError?this.requestQueue.unshift(e):e.reject(t)}}}const e=Date.now(),r=3e5;this.requestQueue=this.requestQueue.filter(t=>{const i=e-t.timestamp>r;return i&&t.reject(new n.RateLimitError("Request expired in queue")),!i})}finally{this.isProcessingQueue=!1}}}getQueueStatus(){return{queueLength:this.requestQueue.length,globalRateLimit:this.globalState,contractRateLimits:Array.from(this.contractStates.entries()).map(([t,e])=>({contractId:t,state:e}))}}clearQueue(){this.requestQueue.forEach(t=>{t.reject(new n.RateLimitError("Queue cleared"))}),this.requestQueue=[]}destroy(){this.queueProcessingInterval&&clearInterval(this.queueProcessingInterval),this.clearQueue()}calculateBackoffTime(t){if(t?.retryAfter)return t.retryAfter;if(t?.resetTime){const e=t.resetTime-Date.now();return Math.max(0,e)}return this.config.defaultBackoffMs}shouldBypassRateLimit(t){return["auth","logout","emergency","health"].some(e=>t.toLowerCase().includes(e))}}},"./src/index.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{AuthenticationError:()=>p.AuthenticationError,AuthenticationManager:()=>i.AuthenticationManager,CircuitBreaker:()=>l.CircuitBreaker,CircuitBreakerError:()=>p.CircuitBreakerError,ContentManager:()=>h.ContentManager,ContractCallError:()=>p.ContractCallError,ContractCallManager:()=>c.ContractCallManager,HttpClient:()=>s.HttpClient,NetworkError:()=>p.NetworkError,PhantomWalletAdapter:()=>o.PhantomWalletAdapter,ProofNetworkClient:()=>n.ProofNetworkClient,ProofNetworkClientError:()=>p.ProofNetworkClientError,RateLimitError:()=>p.RateLimitError,RateLimitManager:()=>a.RateLimitManager,ResponseParser:()=>u.ResponseParser,RetryManager:()=>f.RetryManager,createErrorFromResponse:()=>p.createErrorFromResponse,default:()=>n.ProofNetworkClient,formatAuthenticationMessage:()=>o.formatAuthenticationMessage,validateSignature:()=>o.validateSignature});var n=r("./src/client/proof-network-client.ts"),i=(r("./src/types/index.ts"),r("./src/auth/authentication-manager.ts")),o=r("./src/auth/wallet-utils.ts"),s=r("./src/http/http-client.ts"),a=r("./src/http/rate-limiter.ts"),c=r("./src/contracts/contract-call-manager.ts"),u=r("./src/contracts/response-parser.ts"),h=r("./src/content/content-manager.ts"),f=r("./src/utils/retry.ts"),l=r("./src/utils/circuit-breaker.ts"),p=r("./src/utils/errors.ts")},"./src/types/index.ts":(t,e,r)=>{"use strict";r.r(e)},"./src/utils/circuit-breaker.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{CircuitBreaker:()=>o});var n,i=r("./src/utils/errors.ts");!function(t){t.CLOSED="CLOSED",t.OPEN="OPEN",t.HALF_OPEN="HALF_OPEN"}(n||(n={}));class o{constructor(t){this.config=t,this.state=n.CLOSED,this.failureCount=0,this.lastFailureTime=0,this.nextAttemptTime=0}async execute(t){if(this.state===n.OPEN){if(Date.now()<this.nextAttemptTime)throw new i.CircuitBreakerError("Circuit breaker is open");this.state=n.HALF_OPEN}try{const e=await t();return this.onSuccess(),e}catch(t){throw this.onFailure(),t}}onSuccess(){this.failureCount=0,this.state=n.CLOSED}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.config.failureThreshold&&(this.state=n.OPEN,this.nextAttemptTime=Date.now()+this.config.recoveryTimeout)}getState(){return this.state}getFailureCount(){return this.failureCount}reset(){this.state=n.CLOSED,this.failureCount=0,this.lastFailureTime=0,this.nextAttemptTime=0}}},"./src/utils/errors.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{AuthenticationError:()=>i,CircuitBreakerError:()=>c,ContractCallError:()=>s,NetworkError:()=>a,ProofNetworkClientError:()=>n,RateLimitError:()=>o,createErrorFromResponse:()=>u});class n extends Error{constructor(t,e,r,n){super(t),this.name="ProofNetworkClientError",this.code=e,this.statusCode=r,this.details=n}}class i extends n{constructor(t,e){super(t,"AUTHENTICATION_ERROR",401,e),this.name="AuthenticationError"}}class o extends n{constructor(t,e){super(t,"RATE_LIMIT_ERROR",429,{retryAfter:e}),this.name="RateLimitError"}}class s extends n{constructor(t,e,r){super(t,"CONTRACT_CALL_ERROR",400,{contractId:e,functionName:r}),this.name="ContractCallError"}}class a extends n{constructor(t,e){super(t,"NETWORK_ERROR",e),this.name="NetworkError"}}class c extends n{constructor(t){super(t,"CIRCUIT_BREAKER_OPEN",503),this.name="CircuitBreakerError"}}function u(t,e){const r=e?.error||t.statusText||"Unknown error",n=e?.details||{};switch(t.status){case 401:return new i(r,n);case 429:return new o(r,e?.retryAfter);case 400:return new s(r,n.contractId,n.functionName);default:return new a(r,t.status)}}},"./src/utils/retry.ts":(t,e,r)=>{"use strict";r.r(e),r.d(e,{RetryManager:()=>n});class n{constructor(t){this.config={jitter:!0,...t}}async executeWithRetry(t,e){let r;for(let n=0;n<=this.config.maxRetries;n++)try{return await t()}catch(t){if(r=t,n===this.config.maxRetries)break;if(e&&!e(r))break;const i=this.calculateDelay(n);await this.sleep(i)}throw r}calculateDelay(t){let e;switch(this.config.strategy){case"exponential":e=Math.min(this.config.baseDelay*Math.pow(2,t),this.config.maxDelay);break;case"linear":e=Math.min(this.config.baseDelay*(t+1),this.config.maxDelay);break;default:e=this.config.baseDelay}return this.config.jitter&&(e*=.5+.5*Math.random()),e}sleep(t){return new Promise(e=>setTimeout(e,t))}}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AuthenticationError:()=>t.AuthenticationError,AuthenticationManager:()=>t.AuthenticationManager,CircuitBreaker:()=>t.CircuitBreaker,CircuitBreakerError:()=>t.CircuitBreakerError,ContentManager:()=>t.ContentManager,ContractCallError:()=>t.ContractCallError,ContractCallManager:()=>t.ContractCallManager,HttpClient:()=>t.HttpClient,NetworkError:()=>t.NetworkError,PhantomWalletAdapter:()=>t.PhantomWalletAdapter,ProofNetworkClient:()=>t.ProofNetworkClient,ProofNetworkClientError:()=>t.ProofNetworkClientError,RateLimitError:()=>t.RateLimitError,RateLimitManager:()=>t.RateLimitManager,ResponseParser:()=>t.ResponseParser,RetryManager:()=>t.RetryManager,createErrorFromResponse:()=>t.createErrorFromResponse,formatAuthenticationMessage:()=>t.formatAuthenticationMessage,isBrowser:()=>e,isNode:()=>i,logger:()=>o,storage:()=>s,validateSignature:()=>t.validateSignature}),r("./node_modules/cross-fetch/dist/browser-polyfill.js");var t=r("./src/index.ts");const e="undefined"!=typeof window,i=!e,o={log:(...t)=>console.log("[ProofNetwork]",...t),error:(...t)=>console.error("[ProofNetwork]",...t),warn:(...t)=>console.warn("[ProofNetwork]",...t),debug:(...t)=>{}},s={setItem:(t,r)=>{if(e&&window.localStorage)try{window.localStorage.setItem(`proofnetwork_${t}`,r)}catch(t){o.warn("LocalStorage not available:",t)}},getItem:t=>{if(e&&window.localStorage)try{return window.localStorage.getItem(`proofnetwork_${t}`)}catch(t){o.warn("LocalStorage not available:",t)}return null},removeItem:t=>{if(e&&window.localStorage)try{window.localStorage.removeItem(`proofnetwork_${t}`)}catch(t){o.warn("LocalStorage not available:",t)}}}})(),n})());
//# sourceMappingURL=proofnetwork-client.min.js.map